%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                               Grpahs                                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tikzstyle{edge} = [draw, thick]
\tikzstyle{directed} = [arrows={-latex}, shorten >=1.5pt, shorten <=0pt]
\tikzstyle{inverse directed} = [arrows={latex-}, shorten >=0pt, shorten <=1.5pt]

\tikzstyle{random variable} = [draw, very thick, circle, inner sep=.5pt, minimum size=23pt, font=\small, with struts]
\tikzstyle{implicit} = [rectangle, inner sep=3pt]
\tikzstyle{observed} = [fill=sRedDark!40]
\tikzstyle{variational} = [fill=sBlueDark!40]
\tikzstyle{small} = [inner sep=0pt, minimum size=10pt]
\tikzstyle{hyperparameter} = [fill=sYellowDark!40]
\tikzstyle{latent} = [fill=sGreenDark!40]
\tikzstyle{plate} = [draw=sStoneDark, fill=sStone, fill opacity=.2, very thick, inner xsep=4pt, inner ysep=4pt]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                         Common plot things                          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{data/.style = {
            only marks,
            thin,
            mark size=1.5pt,
            % draw opacity=.75,
            fill opacity=.5,
            sStoneDark,
        }}
\pgfplotsset{tiny data/.style = {
            only marks,
            mark=*,
            mark size=.35pt,
            draw opacity=0,
            fill opacity=.85,
        }}
\pgfplotsset{default plot/.style = {
            grid=major,
            ylabel style={rotate=-90},
            minor y tick num=1,
            minor x tick num=1,
            %
            width=\plotfullwidth,
            height=.5\plotfullheight,
            %
            % NOTE(mrksr): Do not consider labels for axis bounding boxes
            xlabel style={overlay},
            ylabel style={overlay},
            %
            legend style={font=\footnotesize},
        }}

\pgfplotsset{half plot/.style = {
            default plot,
            % NOTE(mrksr): Due to width calculations in pgfplots, two of these next to
            % each other are not wider than the full width if there is no ylabel.
            width=.55\plotfullwidth,
            height=.325\plotfullheight,
        }}

\pgfplotsset{half label plot/.style = {
            half plot,
            % NOTE(mrksr): We need to reserve some space for the label.
            width=.49\plotfullwidth,
        }}

\pgfplotsset{third plot/.style = {
            default plot,
            % NOTE(mrksr): Due to width calculations in pgfplots, two of these next to
            % each other are not wider than the full width.
            width=.4\plotfullwidth,
            height=.325\plotfullheight,
        }}

\tikzstyle{true function} = [semithick, dashed]

\tikzstyle{mean} = [thick]
\tikzstyle{weak mean} = [thin, smooth]
\tikzstyle{std} = [thin]
\tikzstyle{first} = [sTealDark]
\tikzstyle{first fill} = [sTealDark, opacity=0.3]
\tikzstyle{first full} = [sTealDark, fill=sTealDark]
\tikzstyle{second} = [sGreenDark]
\tikzstyle{second fill} = [sGreenDark, opacity=0.3]
\tikzstyle{second full} = [sGreenDark, fill=sGreenDark]
\tikzstyle{third} = [sRedDark]
\tikzstyle{third fill} = [sRedDark, opacity=0.3]
\tikzstyle{third full} = [sRedDark, fill=sRedDark]
\tikzstyle{fourth} = [sYellowDark]
\tikzstyle{fourth fill} = [sYellowDark, opacity=0.3]
\tikzstyle{fourth full} = [sYellowDark, fill=sYellowDark]

\tikzstyle{sample} = [semithick, densely dashed]
\tikzstyle{sample 0} = [sample, hannah0]
\tikzstyle{sample 1} = [sample, hannah1]
\tikzstyle{sample 2} = [sample, hannah2]
\tikzstyle{sample 3} = [sample, hannah3]
\tikzstyle{sample 4} = [sample, hannah4]
\tikzstyle{tiny sample} = [sample, very thin]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                Intro                                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{polynomial plot/.style = {
            half label plot,
            ymin=-3.5,
            ymax=6.5,
            xmin=-2.2,
            xmax=2.2,
            xlabel={$x$},
            ylabel={$y$},
            xlabel style={overlay=false},
            ylabel style={overlay=false},
            legend columns=2,
            legend pos=north west,
        }}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                           GP theory plots                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{prediction plot/.style = {
            half plot,
        }}
\pgfplotsset{prior plot/.style = {
            half plot,
            ymin=-2.5,
            ymax=2.5,
            xmin=-2.5,
            xmax=2.5,
        }}
\pgfplotsset{prior sample/.style = {
            semithick,
            densely dashed,
        }}
\pgfplotsset{posterior plot/.style = {
            half plot,
            ymin=-6.5,
            ymax=6.5,
            xmin=-5,
            xmax=5,
        }}
\pgfplotsset{spgp plot/.style = {
            half plot,
            clip mode=individual, % markers behind lines
            ymin=-1.5,
            ymax=1.5,
            xmin=-4.5,
            xmax=4.5,
        }}
\pgfplotsset{variational gp plot/.style = {
            half plot,
            % NOTE(mrksr): Due to the y ticks width we need to squeeze a little
            width=.54\plotfullwidth,
            ymin=-1.5,
            ymax=1.5,
            xmin=0,
            xmax=1,
        }}

\tikzstyle{dart mark} = [
dart,
fourth full,
draw=black,
semithick,
shape border rotate=90,
inner sep=1.25pt
]
\pgfdeclareplotmark{dart}{\node[dart mark] at (0pt, 0pt) {};}
\pgfplotsset{pseudo inputs/.style = {
            only marks,
            mark=dart,
        }}
\pgfplotsset{svgp pseudo inputs/.style = {
            only marks,
            mark=square*,
            fourth,
            fill opacity=.6,
            thick,
            error bars/.cd,
            y dir=both,
            y explicit,
            error bar style={
                    thick,
                },
        }}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                          Data Association                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{choicenet plot/.style = {
            third plot,
            height=.25\plotfullheight,
            xlabel=$\rv{X}$, ylabel=$\rv{y}$,
            ymin=-1.5, ymax=3.5,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{semi bimodal plot/.style = {
            default plot,
            height=.25\plotfullheight,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                Wind                                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{sine plot/.style = {
            default plot,
            xlabel=$\rv{X}$, ylabel=$\rv{y}$,
            ymin=-1, ymax=1,
            xmin=-1.5, xmax=1.5,
            xtick={-1, 0, 1},
        }}

\pgfplotsset{wind plot/.style = {
            default plot,
            height=120pt,
            enlarge x limits=false,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{wind joint plot/.style = {
            default plot,
            height=.25\plotfullheight,
            width=.95\plotfullwidth,
            enlarge x limits=false,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{wind bound plot/.style = {
            default plot,
            height=.25\plotfullheight,
            width=.95\plotfullwidth,
            enlarge x limits=false,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{wind sample plot/.style = {
            half label plot,
            height=.25\plotfullheight,
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\tikzstyle{wind data} = [thick]

\pgfplotsset{wind decomposition/.style = {
            grid=major,
            try min ticks=3,
            enlarge x limits=false,
            width=110pt,
            height=75pt,
            ylabel style={at={(ticklabel* cs:0.5)},rotate=-90},
            xlabel style={at={(ticklabel* cs:0.5)}},
            tick label style={font=\small},
            label style={font=\small},
        }}

\pgfplotsset{wind decomposition joint plot/.style = {
            grid=major,
            height=75pt,
            enlarge x limits=false,
            ylabel style={rotate=-90},
            ytick pos=left,
            xmin=0, xmax=1,
            xtick={0, 0.5, 1},
            xticklabels={0, , 1},
            ymin=-1.5, ymax=1.5,
            ytick={-1, 0, 1},
            yticklabels={-1, , 1},
            ylabel style={at={(ticklabel* cs:0.5)}},
            xlabel style={at={(ticklabel* cs:0.5)}},
            tick label style={font=\small},
            label style={font=\small},
        }}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                             Wetchicken                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pgfplotsset{wetchicken system plot/.style = {
            default plot,
            width=.44\plotfullwidth,
            height=.35\plotfullheight,
            xlabel=$\mat{y}$, ylabel=$\mat{x}$,
            ymax=6,
            xtick={0, 2.5, 5},
            ytick={0, 2.5, 5},
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{wetchicken cut plot/.style = {
            default plot,
            width=.9\plotfullwidth,
            height=.225\plotfullheight,
            xlabel=$\mat{x}_t$, ylabel=$\mat{x}_{t+1}$,
            ymin=-1,
            ymax=6,
            xmin=-.5,
            xmax=5.5,
            xtick={0, 2.5, 5},
            ytick={0, 2.5, 5},
            % NOTE(mrksr): Rotate back the model plot rotation
            ylabel style={rotate=90},
            xlabel style={overlay=false},
            ylabel style={overlay=false},
        }}

\pgfplotsset{slim colorbar right/.style = {
            colorbar,
            colorbar style={
                    at={(1.05, 0.5)},
                    anchor=west,
                    width=.02*\plotfullwidth,
                    ylabel style={overlay},
                },
        }}

\tikzstyle{quiver arrow} = [-{Stealth[length=4pt, round]}]
\tikzstyle{waterfall} = [draw=none, fill=sStoneDark]
\newcommand{\addwaterfall}{%
    \draw[waterfall] (0, 5) rectangle (5, 5.25) node[midway, above, yshift=2pt] {waterfall};
}
